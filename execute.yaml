steps:
# Step 1: Install PostgreSQL client package
- name: "gcr.io/cloud-builders/apt"
  args: ["update"]
- name: "gcr.io/cloud-builders/apt"
  args: ["install", "-y", "postgresql-client"]

# Step 2: Download SQL script from Cloud Storage bucket
- name: "gcr.io/cloud-builders/gsutil"
  args: ["cp", "gs://bucket-shu/table.sql", "table.sql"]

# Step 3: Execute SQL script in PostgreSQL instance
- name: "gcr.io/cloud-builders/gcloud"
  entrypoint: "bash"
  args:
  - "-c"
  - |
    PGPASSWORD=shubham psql -h 34.133.57.245 -d quickstart-db -U quickstart-user -f table.sql
